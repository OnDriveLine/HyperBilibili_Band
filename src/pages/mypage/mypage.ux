<import name="switch-bar" src="../../components/SwitchBar/SwitchBar.ux"></import>

<template>
  <div class="page">
    <switch-bar title="mypage.title"></switch-bar>
    <div class="profdiv" style="margin-top: 20px">
      <image src="{{accountInfo.face}}@106w_106h" alt="/common/fullgray.png" class="profimg"></image>
      <image src="{{accountInfo.pendant.image}}@176w_176h" alt="/common/alphaimg.png" class="profpendantimg"></image>
    </div>
    <text class="{{name_text_class}}">{{ accountInfo.uname }}</text>
    <div class="tagbar" style="margin-top: 5px">
      <image class="tagimg" src="/common/bililevel/lv{{accountInfo.level_info.current_level}}.png" style="height: 20px">
      </image>
      <image class="tagimg" if="{{is_vip}}" style="margin-left: 10px"
        src="/common/bilivip/{{accountInfo.vip_label.label_theme}}.png"></image>
      <image class="tagimg" if="{{is_senior_member}}" style="margin-left: 10px" src="/common/senior_member.png"></image>
    </div>
    <div class="btnbase" style="margin-top: 40px" @click="GoMyFavFolders()">
      <image class="btnimg" src="/common/mypage_star.png"></image>
      <text class="btntext">{{ $t("mypage.favourite") }}</text>
      <image src="/common/arrow_right.png"></image>
    </div>
    <div class="btnbase" style="margin-top: 10px" @click="GoHistory()">
      <image class="btnimg" src="/common/mypage_history.png"></image>
      <text class="btntext">{{ $t("mypage.history") }}</text>
      <image src="/common/arrow_right.png"></image>
    </div>
    <div class="btnbase" style="margin-top: 10px" @click="WIPTips()">
      <image class="btnimg" src="/common/mypage_watchlater.png"></image>
      <text class="btntext">{{ $t("mypage.showLater") }}</text>
      <image src="/common/arrow_right.png"></image>
    </div>
    <div class="btnbase" style="margin-top: 10px" @click="GoMessages()">
      <image class="btnimg" src="/common/mypage_messager.png"></image>
      <text class="btntext">{{ $t("mypage.messages") }}</text>
      <image src="/common/arrow_right.png"></image>
    </div>
    <text style="margin-top: 25px"></text>
  </div>
</template>

<script>
import router from "@system.router"
import prompt from "@system.prompt"
export default {
  private: {
    name_text_class: "name",
    is_vip: false,
    is_senior_member: false,
    accountInfo: {}
  },
  GoHistory(){
    router.push({
      uri: "pages/history"
    })
  },
  GoMyFavFolders(){
    router.push({
      uri: "pages/favfolders",
      params: {
        user_mid: this.$app.$def.biliclient.accountInfo.mid
      }
    })
  },
  GoMessages(){
    router.push({
      uri: "pages/messages"
    })
  },
  WIPTips() {
    prompt.showToast({
      message: "该功能还在开发中"
    })
  },
  UpdateShow() {
    if (this.accountInfo.vip_pay_type) {
      this.is_vip = true
      this.name_text_class = "vipname"
    }
    if (this.accountInfo.is_senior_member) {
      this.is_senior_member = true
    }
  },
  onInit() {
    this.accountInfo = this.$app.$def.biliclient.accountInfo
    this.UpdateShow()
  }
}
</script>

<style>
.page {
  display: flex;
  flex-direction: column;
  align-items: center;
  height: 100%;
  position: absolute;
  width: 100%;
}

.profdiv {
  width: 176px; /* 设置为与 profpendantimg 一致 */
  height: 176px; /* 设置为与 profpendantimg 一致 */
  align-items: center;
  justify-content: center;
}

.profimg {
  width: 106px;
  height: 106px;
  border-radius: 50%;
}

.profpendantimg {
  width: 176px;
  height: 176px;
  position: absolute;
  top: 0;
  left: 0;
  border-radius: 50%;
}

.name {
  font-size: 30px;
  font-weight: 600;
}

.vipname {
  font-size: 30px;
  font-weight: 600;
  color: #ff7da8;
}

.tagbar {
  flex-direction: row;
  width: 40%;
  align-items: center;
  justify-content: center;
}

.tagimg {
  height: 30px;
  object-fit: contain;
}

.btnbase {
  width: 314px;
  height: 93px;
  border-radius: 30px;
  background-color: #262626;
  align-items: center;
}

.btnimg {
  margin-left: 22px;
  width: 49px;
  height: 52px;
  object-fit: contain;
}

.btntext {
  margin-left: 22px;
  width: 190px;
  font-size: 35px;
  font-weight: 500;
}
</style>